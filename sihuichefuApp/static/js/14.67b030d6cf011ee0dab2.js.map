{"version":3,"sources":["webpack:///src/views/login/login.vue","webpack:///./src/utils/validate.js","webpack:///./src/views/login/login.vue?7dc0","webpack:///./src/views/login/login.vue"],"names":["login_login","data","countdown","isAble","text","tel","validNo","timer","mounted","utils","removeLocalStorage","methods","onClickLeft","this","$router","go","timerCount","_this","setInterval","clearInterval","getMsg","str","test","$toast","Object","login","mobile","then","loginSumbit","_this2","setLocalStorage","token","userInfo","stringify_default","new","$store","dispatch","components","_components","defineProperty_default","field_default","a","name","button_default","views_login_login","render","_vm","_h","$createElement","_c","_self","attrs","title","left-text","right-text","left-arrow","fixed","on","click-left","_v","staticClass","staticStyle","margin-top","type","placeholder","model","value","callback","$$v","expression","center","icon","slot","size","disabled","click","$event","padding","background-color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qQA0BA,IAAAA,GACAC,KADA,WAEA,OACAC,UAAA,GACAC,QAAA,EACAC,KAAA,QACAC,IAAA,GACAC,QAAA,GACAC,MAAA,OAGAC,QAXA,WAYAC,EAAA,EAAAC,mBAAA,qBAEAC,SACAC,YADA,WAEAC,KAAAC,QAAAC,IAAA,IAEAC,WAJA,WAIA,IAAAC,EAAAJ,KACAA,KAAAN,QACAM,KAAAX,UAAA,GACAW,KAAAV,QAAA,EACAU,KAAAN,MAAAW,YAAA,WACAD,EAAAf,UAAA,GAAAe,EAAAf,WAAA,IACAe,EAAAf,YACAe,EAAAb,KAAA,QAAAa,EAAAf,UAAA,MAEAe,EAAAd,QAAA,EACAgB,cAAAF,EAAAV,OACAU,EAAAV,MAAA,KACAU,EAAAb,KAAA,UAEA,OAGAgB,OArBA,WAsBA,GClC8BC,EDkC9BR,KAAAR,KCjCc,wEACDiB,KAAKD,GDkClB,OADAR,KAAAU,OAAA,iBACA,ECpCO,IAAuBF,EDsC9BG,OAAAC,EAAA,EAAAD,EAAAE,OAAAb,KAAAR,MAAAsB,KAAA,SAAA1B,MAIAY,KAAAG,cAGAY,YAjCA,WAiCA,IAAAC,EAAAhB,KACAW,OAAAC,EAAA,EAAAD,EAAAE,OAAAb,KAAAR,IAAAC,QAAAO,KAAAP,UAAAqB,KAAA,SAAA1B,GACAQ,EAAA,EAAAqB,iBACAC,MAAA9B,EAAA8B,QAEAP,OAAAC,EAAA,EAAAD,GAAAG,KAAA,SAAA1B,GACAQ,EAAA,EAAAqB,iBACAE,SAAAC,IAAAhC,EAAAiC,OAEAL,EAAAM,OAAAC,SAAA,iBACAP,EAAAf,QAAAC,IAAA,SAKAsB,YAAAC,KAAAC,IAAAD,EACAE,EAAAC,EAAAC,KADAF,EAAAC,GAAAF,IAAAD,EAEAK,EAAAF,EAAAC,KAFAC,EAAAF,GAAAH,IErFAM,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,eAAmCE,OAAOC,MAAA,KAAAC,YAAA,GAAAC,aAAA,GAAAC,aAAA,GAAAC,OAAA,GAAyEC,IAAKC,aAAAZ,EAAAlC,eAA8BkC,EAAAa,GAAA,KAAAV,EAAA,kBAAmCW,YAAA,OAAAC,aAAgCC,aAAA,UAAqBb,EAAA,aAAkBE,OAAOY,KAAA,MAAAC,YAAA,UAAoCC,OAAQC,MAAApB,EAAA,IAAAqB,SAAA,SAAAC,GAAyCtB,EAAAzC,IAAA+D,GAAYC,WAAA,SAAmBvB,EAAAa,GAAA,KAAAV,EAAA,aAA8BE,OAAOmB,OAAA,GAAAN,YAAA,SAAAO,KAAA,SAAkDN,OAAQC,MAAApB,EAAA,QAAAqB,SAAA,SAAAC,GAA6CtB,EAAAxC,QAAA8D,GAAgBC,WAAA,aAAuBpB,EAAA,cAAmBW,YAAA,UAAAT,OAA6BqB,KAAA,SAAAC,KAAA,QAAAV,KAAA,UAAAW,SAAA5B,EAAA3C,OAAAC,KAAA0C,EAAA1C,MAAsFqD,IAAKkB,MAAA,SAAAC,GAAyB9B,EAAA1B,WAAcoD,KAAA,YAAe,OAAA1B,EAAAa,GAAA,KAAAV,EAAA,kBAA2CY,aAAaC,aAAA,OAAAe,QAAA,WAAAC,mBAAA,aAAuE7B,EAAA,cAAmBW,YAAA,YAAAT,OAA+BsB,KAAA,SAAehB,IAAKkB,MAAA7B,EAAAlB,eAAyBkB,EAAAa,GAAA,iBAErhCoB,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAlF,EACA4C,GATA,EAVA,SAAAuC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/14.67b030d6cf011ee0dab2.js","sourcesContent":["<template>\r\n    <div >\r\n      <van-nav-bar\r\n        title=\"登录\"\r\n        left-text=\"\"\r\n        right-text=\"\"\r\n        left-arrow\r\n        :fixed=\"true\"\r\n        @click-left=\"onClickLeft\"\r\n        />\r\n        <van-cell-group class=\"page\" style=\"margin-top:70px;\" >\r\n            <van-field v-model=\"tel\" type=\"tel\" placeholder=\"请输入手机号\" />\r\n            <van-field center v-model=\"validNo\" placeholder=\"请输入验证码\" icon=\"clear\">\r\n              <van-button slot=\"button\" size=\"small\" type=\"primary\" :disabled=\"isAble\" :text=\"text\" class=\"getCode\" @click=\"getMsg()\"></van-button>\r\n            </van-field>\r\n        </van-cell-group>\r\n        <van-cell-group style=\"margin-top:20px;padding:0px 15px;background-color:#f2f2f2;\"  >\r\n          <van-button size=\"large\"  class=\"login-btn\" @click=\"loginSumbit\">登录</van-button>\r\n        </van-cell-group>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { getMessage, login, getUser } from '@/api/login'\r\nimport { Field, Button } from 'vant'\r\nimport { localStorageTool } from '@/utils'\r\nimport { validatePhone } from '@/utils/validate'\r\nexport default {\r\n  data() {\r\n    return {\r\n      countdown: 60,\r\n      isAble: false,\r\n      text: '获取验证码',\r\n      tel: '', // 电话号码\r\n      validNo: '', // 验证码\r\n      timer: null\r\n    }\r\n  },\r\n  mounted() {\r\n    localStorageTool.removeLocalStorage('token', 'userInfo')\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1)\r\n    },\r\n    timerCount() {\r\n      if (!this.timer) {\r\n        this.countdown = 60\r\n        this.isAble = true\r\n        this.timer = setInterval(() => {\r\n          if (this.countdown > 0 && this.countdown <= 60) {\r\n            this.countdown--\r\n            this.text = '重新发送(' + this.countdown + ')'\r\n          } else {\r\n            this.isAble = false\r\n            clearInterval(this.timer)\r\n            this.timer = null\r\n            this.text = '获取验证码'\r\n          }\r\n        }, 1000)\r\n      }\r\n    },\r\n    getMsg() {\r\n      if (!(validatePhone(this.tel))) {\r\n        this.$toast(' 请输入正确的电话号码 ')\r\n        return false\r\n      } else {\r\n        getMessage({ mobile: this.tel }).then((data) => {\r\n          // this.$toast('已发送！')\r\n          // this.timerCount()\r\n        })\r\n        this.timerCount()\r\n      }\r\n    },\r\n    loginSumbit() {\r\n      login({ mobile: this.tel, validNo: this.validNo }).then((data) => {\r\n        localStorageTool.setLocalStorage({\r\n          'token': data.token // '9f946aa682fd6fc258c5449345917a76' // data.token\r\n        })\r\n        getUser().then((data) => {\r\n          localStorageTool.setLocalStorage({\r\n            'userInfo': JSON.stringify(data.new) // data.token\r\n          })\r\n          this.$store.dispatch('getDefaultCar')\r\n          this.$router.go(-1)\r\n        })\r\n      })\r\n    }\r\n  },\r\n  components: {\r\n    [Field.name]: Field,\r\n    [Button.name]: Button\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.login-btn{\r\n    background: #fa5a4b;\r\n    color: #fff;\r\n    border-radius: 5px;\r\n    margin: 10px auto\r\n}\r\n.page{\r\n    width: 92%;\r\n    margin: 10px auto;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/login.vue","\n/* 合法uri */\nexport function validateURL(textval) {\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return urlregex.test(textval)\n}\n\n/* 小写字母 */\nexport function validateLowerCase(str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/* 大写字母 */\nexport function validateUpperCase(str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/* 大小写字母 */\nexport function validatAlphabets(str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n/**\n * 手机号验证\n * @param {validatePhone} str\n */\nexport function validatePhone(str) {\n  const reg = /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/\n  return reg.test(str)\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/validate.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"登录\",\"left-text\":\"\",\"right-text\":\"\",\"left-arrow\":\"\",\"fixed\":true},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('van-cell-group',{staticClass:\"page\",staticStyle:{\"margin-top\":\"70px\"}},[_c('van-field',{attrs:{\"type\":\"tel\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.tel),callback:function ($$v) {_vm.tel=$$v},expression:\"tel\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"center\":\"\",\"placeholder\":\"请输入验证码\",\"icon\":\"clear\"},model:{value:(_vm.validNo),callback:function ($$v) {_vm.validNo=$$v},expression:\"validNo\"}},[_c('van-button',{staticClass:\"getCode\",attrs:{\"slot\":\"button\",\"size\":\"small\",\"type\":\"primary\",\"disabled\":_vm.isAble,\"text\":_vm.text},on:{\"click\":function($event){_vm.getMsg()}},slot:\"button\"})],1)],1),_vm._v(\" \"),_c('van-cell-group',{staticStyle:{\"margin-top\":\"20px\",\"padding\":\"0px 15px\",\"background-color\":\"#f2f2f2\"}},[_c('van-button',{staticClass:\"login-btn\",attrs:{\"size\":\"large\"},on:{\"click\":_vm.loginSumbit}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e5bb654a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e5bb654a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e5bb654a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e5bb654a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}