webpackJsonp([43],{"/l1b":function(e,t){},"8i8E":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i("bOdI"),s=i.n(a),o=(i("jydU"),i("WQwN")),c=i.n(o),r=(i("dlG5"),i("MpXg")),u=i.n(r),l=(i("OMF1"),i("Maz4")),d=i.n(l),p=i("mvHQ"),h=i.n(p),v=i("fy5O"),m=i("vMJZ"),f=i("0xDb"),y={data:function(){return{radio:"",picIp:"http://222.73.44.144:8300",xichePrice:[],thisPrice:"",currIndex:0,greatcoupon:{},couponMoney:"无可用优惠券",user:"",couponId:"",listBill:{},createbill:{},itemId:""}},activated:function(){var e=this;if(this.$route.params.isUpdate){var t=f.c.getLocalStorage("userInfo").userInfo;t&&(this.user=JSON.parse(t),this.$route.query.id&&(this.xichePrice=[],this.thisPrice=0,this.itemId=0,Object(v.a)({companyId:this.$route.query.id,type:0,pageNo:1,pageSize:999}).then(function(t){t.page.records.length>0?(e.xichePrice=t.page.records,e.thisPrice=e.xichePrice[0].itemPrice,e.itemId=e.xichePrice[0].id,e.GreatCoupon(e.thisPrice,e.user.id)):(e.couponMoney=0,e.couponId=0)})))}else this.$route.params.reduceMoney&&(this.couponMoney=this.$route.params.reduceMoney,this.couponId=this.$route.params.id)},beforeRouteEnter:function(e,t,i){e.params.isUpdate=1,"/shop/washCar/charge/coupon"===t.path&&(e.params.isUpdate=0),i()},mounted:function(){},methods:{onClickLeft:function(){this.$router.go(-1)},selectItem:function(e,t){this.currIndex=t,this.thisPrice=e.itemPrice,this.itemId=e.id},GreatCoupon:function(e,t){var i=this;this.greatcoupon={},Object(v.b)({payMoney:e,ownerId:t,couponType:0}).then(function(e){null!=e.new&&(i.greatcoupon=e.new,i.greatcoupon.reduceMoney&&(i.couponMoney=i.greatcoupon.reduceMoney,i.couponId=i.greatcoupon.id))})},goPay:function(){var e=this,t="";void 0!==this.$store.getters.myDefaultCar.carCode&&""!==this.$store.getters.myDefaultCar.carCode&&(t=this.$store.getters.myDefaultCar.carCode),this.createbill={ownerId:this.user.id,carCode:t,companyId:this.$route.query.id,serviceType:0,couponId:this.couponId,mgrBillDetailItemList:[{itemId:this.itemId}]},Object(m.j)({formData:h()(this.createbill)}).then(function(t){e.listBill=t.new,e.$router.replace({name:"订单支付",params:{id:e.listBill.id,payKind:e.listBill.payKind,payMoney:e.listBill.receiveMoney}})})}},components:(n={},s()(n,d.a.name,d.a),s()(n,u.a.name,u.a),s()(n,c.a.name,c.a),n)},_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-nav-bar",{staticStyle:{"z-index":"10"},attrs:{title:"洗车买单","left-text":"","right-text":"","left-arrow":!0,fixed:!0},on:{"click-left":e.onClickLeft}}),e._v(" "),i("div",{staticClass:"show-price mTop"},[i("div",{staticClass:"price-detail"},[e._v("\n      ￥"),i("span",[e._v(e._s(this.thisPrice))])]),e._v(" "),i("div",{staticClass:"font-s"},[e._v("标准洗车1次")]),e._v(" "),i("div",{staticClass:"s-line"})]),e._v(" "),i("div",[i("ul",{staticClass:"price-item"},e._l(e.xichePrice,function(t,n){return i("li",{key:n,on:{click:function(i){e.selectItem(t,n)}}},[i("div",{staticClass:"iconfont",class:{active:e.currIndex===n}},[i("van-icon",{attrs:{name:"checked"}})],1),e._v(" "),i("span",{staticClass:"item-name"},[e._v(e._s(t.itemName)+" ")]),e._v(" "),i("span",{staticClass:"item-money"},[e._v("￥"),i("span",[e._v(e._s(t.itemPrice))])])])}))]),e._v(" "),i("div",[i("van-cell",{attrs:{title:"我的优惠券",icon:"coupon","is-link":"",value:-this.couponMoney,to:{name:"我的优惠券",params:{couponId:e.couponId}}}})],1),e._v(" "),i("div",{staticClass:"page-bottom"},[e._m(0),e._v(" "),i("button",{staticClass:"xi-button",on:{click:e.goPay}},[e._v("去买单")])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xi-pay"},[this._v("\n        ￥"),t("span",{staticClass:"xi-pay-money"},[this._v("24")]),this._v("起\n      ")])}]};var I=i("VU/8")(y,_,!1,function(e){i("/l1b")},"data-v-0441408e",null);t.default=I.exports}});
//# sourceMappingURL=43.0a425889a5e7b2c080f8.js.map