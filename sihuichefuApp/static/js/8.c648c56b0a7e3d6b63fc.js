webpackJsonp([8],{"4Omd":function(t,e){},Jts8:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),n=s("Gu7T"),l=s.n(n),o=s("exGp"),r=s.n(o),c=s("S49b"),p=s("7Otq"),u=s.n(p),v=s("Owbt"),h=s("bOdI"),y=s.n(h),d=(s("tLo2"),s("blRl")),m=s.n(d),f=s("cKc3");var g={name:"arrow",props:{isActive:{type:Boolean,default:!1}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"inline-block"}},[e("svg",{staticClass:"arrow",class:{"is-active":this.isActive},attrs:{t:"1528441729013",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2100","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32"}},[e("path",{attrs:{d:"M927.804 352.193l-415.804 415.632-415.803-415.632 63.616-63.445 352.209 352.017 352.102-352.017z","p-id":"2101"}})])])},staticRenderFns:[]};var _,T=s("VU/8")(g,w,!1,function(t){s("4Omd")},"data-v-4c79eba2",null).exports,x={name:"multiQuery",data:function(){return{Typelist:[{label:"全部类型",value:""}],sortList:[{label:"距离最近",value:0},{label:"好评优先",value:1}],showType:!1,sortType:!1,selectSort:{label:"距离最近",value:0},selectItem:{label:"全部类型",value:""}}},mounted:function(){var t,e,s=this;(t={type:"itemType"},f.a.fetchPost("/v1/app/sysDict/selectList",t,e)).then(function(t){var e;(e=s.Typelist).push.apply(e,l()(t.newList))})},methods:{selectI:function(t){this.selectItem=t,this.showType=!1,this.$emit("change",this.selectItem,this.selectSort)},selectS:function(t){this.selectSort=t,this.sortType=!1,this.$emit("change",this.selectItem,this.selectSort)}},components:(_={},y()(_,m.a.name,m.a),y()(_,"arrow",T),_)},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"multiQuery"},[s("div",{staticClass:"page-top"},[s("div",{staticClass:"flex-wrap"},[s("div",{staticClass:"flex top-item",class:{active:t.showType},on:{click:function(e){t.showType=!t.showType,t.sortType=!1}}},[t._v("\n        "+t._s(t.selectItem.label)+" "),s("arrow",{attrs:{isActive:t.showType}})],1),t._v(" "),s("div",{staticClass:"vertical-line"}),t._v(" "),s("div",{staticClass:"flex top-item",class:{active:t.sortType},on:{click:function(e){t.sortType=!t.sortType,t.showType=!1}}},[t._v("\n        "+t._s(t.selectSort.label)),s("arrow",{attrs:{isActive:t.sortType}})],1)])]),t._v(" "),s("van-popup",{staticClass:"popupShow",attrs:{position:"top",overlay:!0,transition:"popup-fade"},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}},[s("van-cell-group",t._l(t.Typelist,function(e,i){return s("van-cell",{key:i,attrs:{title:e.label,icon:"home"},on:{click:function(s){t.selectI(e)}}},[t.selectItem.value==e.value?s("van-icon",{staticStyle:{color:"red"},attrs:{slot:"right-icon",name:"success"},slot:"right-icon"}):t._e()],1)}))],1),t._v(" "),s("van-popup",{staticClass:"popupShow",attrs:{position:"top",overlay:!0,transition:"popup-fade"},model:{value:t.sortType,callback:function(e){t.sortType=e},expression:"sortType"}},[s("van-cell-group",t._l(t.sortList,function(e,i){return s("van-cell",{key:i,attrs:{title:e.label,icon:"home"},on:{click:function(s){t.selectS(e)}}},[t.selectSort.value==e.value?s("van-icon",{staticStyle:{color:"red"},attrs:{slot:"right-icon",name:"success"},slot:"right-icon"}):t._e()],1)}))],1)],1)},staticRenderFns:[]};var S=s("VU/8")(x,b,!1,function(t){s("PJBG")},null,null).exports,C=s("bh5B"),k=s("Y1Do"),I=s("0xDb"),D={mixins:[k.a],data:function(){return{imageURL:u.a,list:[],kindList:[],picIp:"http://222.73.44.144:8300",cssH:{height:window.innerHeight-137+"px"},locationD:{},sortType:0,selectTypeValue:""}},watch:{"$store.getters.currentCity":function(t){var e=this;this.$nextTick(function(){e.resetInit()})}},activated:function(){this.$refs.scroll.refresh()},mounted:function(){this.locationD=this.$store.getters.WGS,this.resetInit()},methods:{initData:function(){var t=this;return r()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.f)({pageNo:t.pages.currPage,pageSize:t.pages.perPage,selectType:t.selectTypeValue,city:t.$store.getters.currentCity.city,lat:t.locationD.latitude,lng:t.locationD.longitude,sortType:t.sortType},!0).then(function(e){var s;e.page.records&&(1===t.pages.currPage?t.list=e.page.records:(s=t.list).push.apply(s,l()(e.page.records)));return e.page.total});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,t)}))()},filed:function(t){return Object(I.b)(t)},changeType:function(t,e){this.selectTypeValue=t.value,this.sortType=e.value,this.resetInit()}},components:{IsEmpty:v.a,MultiQuery:S,Scroll:C.a}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{staticStyle:{"z-index":"10"},attrs:{title:"门店","left-text":"","right-text":"","left-arrow":!1,fixed:!0}}),t._v(" "),s("MultiQuery",{on:{change:t.changeType}}),t._v(" "),s("scroll",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],ref:"scroll",staticStyle:{"margin-top":"87px"},style:t.cssH,attrs:{data:t.list,pullDownRefresh:!0,pullUpLoad:!t.noMore},on:{pullingDown:t.onPullingDown,pullingUp:t.onPullingUp}},t._l(t.list,function(e,i){return s("van-cell",{key:i,attrs:{to:{path:"/shop/detail",query:{id:e.id}}}},[s("div",{staticClass:"news-item"},[s("div",{staticClass:"news-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.picIp+e.companyLogo,expression:"picIp+item.companyLogo"}]})]),t._v(" "),s("div",{staticClass:"news-content"},[s("div",{staticClass:"news-title"},[t._v(t._s(e.companyName))]),t._v(" "),s("div",{staticClass:"sort"},[s("span",[s("span",{staticClass:"sort-large"},[t._v(t._s(e.companyScore?e.companyScore.toFixed(2):0))]),t._v("分")]),t._v(" "),s("div",{staticClass:"sort-right"},[s("span",{staticClass:"sort-large"},[t._v(t._s(t.filed(e.distance)))])])]),t._v(" "),s("div",{staticStyle:{height:"24px",overflow:"hidden"}},t._l(e.baseCompanyKindList,function(e,i){return s("span",{key:i,staticClass:"tips-item"},[t._v(t._s(e.typeName))])})),t._v(" "),s("div",{staticClass:"address"},[t._v(t._s(e.address))])])])])})),t._v(" "),s("is-empty",{model:{value:t.isEmpty,callback:function(e){t.isEmpty=e},expression:"isEmpty"}},[t._v("抱歉,没有最新消息")])],1)},staticRenderFns:[]};var O=s("VU/8")(D,L,!1,function(t){s("OS26")},"data-v-c0a50598",null);e.default=O.exports},OS26:function(t,e){},PJBG:function(t,e){}});
//# sourceMappingURL=8.c648c56b0a7e3d6b63fc.js.map