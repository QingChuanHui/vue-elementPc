webpackJsonp([27],{UFZg:function(t,e){},rH6v:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("bOdI"),i=n.n(s),a=(n("Mcfu"),n("r9aq")),o=n.n(a),c=n("L9TO"),r=n("0xDb"),l=n("iR6O"),v=n.n(l),d={data:function(){return{picUrl:"http://222.73.44.144:8300",defaultTop:v.a,user:{},commentList:[],newsOne:{title:""},newsComment:{},loading:!1,finished:!1,comment:""}},mounted:function(){var t=r.c.getLocalStorage("userInfo").userInfo;t&&(this.user=JSON.parse(t))},created:function(){var t=this;Object(c.f)({id:this.$route.query.id}).then(function(e){t.newsOne=e.new}),this.getCommentList()},methods:{getCommentList:function(){var t=this;Object(c.d)({id:this.$route.query.id}).then(function(e){t.commentList=e.commentList})},onClickLeft:function(){this.$router.go(-1)},addNewLike:function(){var t=this;Object(c.a)({id:this.$route.query.id}).then(function(e){t.newsOne.like+=1,t.$toast("头条点赞成功！")})},addComentLike:function(t){var e=this;Object(c.c)({id:t}).then(function(n){var s=e.commentList.filter(function(e){return e.id===t});s.length>0&&(s[0].like+=1),e.$toast("评论点赞成功！")})},sendComment:function(){var t=this;Object(c.b)({newsId:this.$route.query.id,userId:this.user.id,comment:this.comment}).then(function(e){t.getCommentList(),t.$toast("评论成功！"),t.comment=""})}},components:i()({},o.a.name,o.a)},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"新闻详情","left-text":"","right-text":"","left-arrow":"",fixed:!0},on:{"click-left":t.onClickLeft}}),t._v(" "),n("div",{staticClass:"news-detail mTop"},[n("div",{staticClass:"news-title"},[t._v(" "+t._s(t.newsOne.title)+" ")]),t._v(" "),n("div",{staticClass:"news-bottom"},[n("span",{staticClass:"news-author"},[t._v(t._s(t.newsOne.author))]),t._v(" "),n("span",{staticClass:"news-time"},[t._v(t._s(t.newsOne.createDate))]),t._v(" "),n("div",{staticClass:"news-visited"},[n("van-icon",{attrs:{name:"password-view"}}),t._v(" "),n("span",[t._v(t._s(t.newsOne.hits))])],1)]),t._v(" "),n("div",{staticStyle:{"margin-bottom":"60px"}},[n("div",[n("div",{staticClass:"new-div",domProps:{innerHTML:t._s(t.newsOne.detail)}}),t._v(" "),n("p",{staticClass:"source"},[t._v("本文来源于"+t._s(t.newsOne.source))]),t._v(" "),n("button",{staticClass:"like",on:{click:t.addNewLike}},[n("svg-icon",{attrs:{"icon-class":"like"}}),t._v("\n          "+t._s(t.newsOne.like)+"\n          "),t.newsOne.like?t._e():n("span",[t._v("0")])],1)]),t._v(" "),t.commentList.length>0?n("van-cell-group",{staticClass:"topGroup"},[n("van-cell",{attrs:{title:"全部评论",icon:"wap-nav"}}),t._v(" "),t._l(t.commentList,function(e,s){return n("van-cell",{key:s},[n("div",{staticClass:"content"},[n("div",{staticClass:"bg-cut"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:t.picUrl+e.headImage,loading:t.defaultTop,error:t.defaultTop},expression:"{ src:picUrl+item.headImage,loading:defaultTop,error:defaultTop}"}]})]),t._v(" "),n("div",{staticClass:"content-name"},[t._v(t._s(e.userName))]),t._v(" "),n("div",{staticClass:"content-time"},[t._v(t._s(e.createDate))]),t._v(" "),n("div",{staticClass:"content-content"},[t._v(t._s(e.comment))])])])})],2):t._e()],1),t._v(" "),n("div",{staticClass:"footer"},[n("van-icon",{staticClass:"footer-icon",attrs:{name:"chat"},on:{click:t.sendComment}}),t._v(" "),n("div",{staticClass:"footer-div"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])],1)])],1)},staticRenderFns:[]};var u=n("VU/8")(d,m,!1,function(t){n("UFZg")},"data-v-63848aa4",null);e.default=u.exports}});
//# sourceMappingURL=27.8d128147c3e7744c171f.js.map