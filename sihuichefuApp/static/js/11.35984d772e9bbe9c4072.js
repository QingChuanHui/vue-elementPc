webpackJsonp([11],{TabF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=a("bOdI"),s=a.n(o),n=(a("FDxC"),a("w+oK")),r=a.n(n),c=(a("tLo2"),a("blRl")),l=a.n(c),u=(a("wvM5"),a("MyDk")),d=a.n(u),m=(a("D0HL"),a("tLiD")),p=a.n(m),h=(a("jydU"),a("WQwN")),v=a.n(h),y=a("mvHQ"),f=a.n(y),C=a("fy5O"),_=a("vMJZ"),w=a("S49b"),x=a("0xDb"),b={data:function(){return{user:"",couponId:"",carCode:"",username:"",phone:"",minDate:new Date,show:!1,datePicker:"",greatcoupon:{},couponMoney:0,time:"请选择预约时间",shopDetail:{},itemDetail:{},itemName:"",Money:"",sex:0,couponType:"",mealDetail:{}}},activated:function(){var e=this;if(this.$route.params.isUpdate){this.couponMoney=0,this.couponId="",void 0!==this.$store.getters.myDefaultCar.carCode&&""!==this.$store.getters.myDefaultCar.carCode&&(this.carCode=this.$store.getters.myDefaultCar.carCode);var t=x.c.getLocalStorage("userInfo").userInfo;t&&(this.user=JSON.parse(t),this.phone=this.user.phone,this.username=this.user.name,this.$route.query.id&&Object(w.a)({id:this.$route.query.id}).then(function(t){e.shopDetail=t.new}),this.$route.query.itemCode&&Object(w.c)({companyId:this.$route.query.id,itemCode:this.$route.query.itemCode}).then(function(t){e.itemDetail=t.new,e.Money=e.itemDetail.itemPrice,e.couponType=e.itemDetail.type,e.GreatCoupon(e.Money,e.user.id,e.couponType)}),this.$route.query.setmealId&&Object(w.d)({id:this.$route.query.setmealId}).then(function(t){e.mealDetail=t.new,console.log(e.mealDetail)}))}else this.$route.params.reduceMoney&&(this.couponMoney=this.$route.params.reduceMoney,this.couponId=this.$route.params.id)},beforeRouteEnter:function(e,t,a){e.params.isUpdate=1,"/shop/washCar/charge/coupon"===t.path&&(e.params.isUpdate=0),a()},mounted:function(){},methods:{onClickLeft:function(){this.$router.go(-1)},sureTime:function(){this.show=!1,this.datePicker?this.time=Object(x.d)(this.datePicker,"{y}-{m}-{d}"):this.time="请选择预约时间"},GreatCoupon:function(e,t,a){var i=this;this.greatcoupon={},Object(C.b)({payMoney:e,ownerId:t,couponType:a}).then(function(e){null!=e.new&&(i.greatcoupon=e.new,i.greatcoupon.reduceMoney&&(i.couponMoney=i.greatcoupon.reduceMoney,i.couponId=i.greatcoupon.id))})},goPay:function(){var e=this;this.$route.query.itemCode&&(this.createbill={ownerId:this.user.id,carCode:this.carCode,companyId:this.$route.query.id,serviceType:this.itemDetail.type,couponId:this.couponId,mgrBillDetailItemList:[{itemId:this.itemDetail.id}],contectPerson:this.username,contectPersonPhone:this.phone,appointmentTime:this.time,contectPersonSex:this.sex,isItem:1}),this.$route.query.setmealId&&(this.createbill={ownerId:this.user.id,carCode:this.carCode,companyId:this.$route.query.id,mgrBillDetailSetmealList:[{setmealId:this.mealDetail.id}],contectPerson:this.username,contectPersonPhone:this.phone,appointmentTime:this.time,contectPersonSex:this.sex,isItem:0}),Object(_.j)({formData:f()(this.createbill)}).then(function(t){e.listBill=t.new,e.$router.replace({name:"订单支付",params:{id:e.listBill.id,payKind:e.listBill.payKind,payMoney:e.listBill.receiveMoney}})})}},components:(i={},s()(i,v.a.name,v.a),s()(i,p.a.name,p.a),s()(i,d.a.name,d.a),s()(i,l.a.name,l.a),s()(i,r.a.name,r.a),i)},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{staticStyle:{"z-index":"10"},attrs:{title:"订单填写","left-text":"","right-text":"","left-arrow":!0,fixed:!0},on:{"click-left":e.onClickLeft}}),e._v(" "),a("div",{staticClass:"mTop"},[a("div",{staticClass:"form_wrap"},[a("div",{staticClass:"bill_store"},[a("div",{staticClass:"store-detail"},[a("h3",[e._v(e._s(e.shopDetail.companyName)+" ")]),e._v(" "),a("div",{staticClass:"store-detail"},[a("van-icon",{attrs:{name:"location"}}),e._v("\n              "+e._s(e.shopDetail.address)+"\n            ")],1),e._v(" "),a("div",[a("van-icon",{attrs:{name:"underway"}}),e._v("\n              营业时间："+e._s(e.shopDetail.companyTime)+"\n            ")],1),e._v(" "),a("div",[a("van-icon",{attrs:{name:"pending-orders"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.itemCode,expression:"$route.query.itemCode"}]},[e._v(e._s(e.itemDetail.itemName))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.setmealId,expression:"$route.query.setmealId"}]},[e._v(e._s(e.mealDetail.name))])],1)])]),e._v(" "),a("div",{staticClass:"store_line"})]),e._v(" "),a("div",{staticClass:"form_wrap"},[a("van-cell-group",[a("van-field",{attrs:{label:"车牌号",placeholder:"请输入车牌号"},model:{value:e.carCode,callback:function(t){e.carCode=t},expression:"carCode"}}),e._v(" "),a("van-field",{attrs:{label:"联系人",placeholder:"请输入联系人姓名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("div",{staticClass:"sex"},[a("span",{staticClass:"sex-picker_male",class:{active:0==e.sex},on:{click:function(t){e.sex=0}}}),e._v(" "),a("span",{staticClass:"sex-picker_female",class:{active:1==e.sex},on:{click:function(t){e.sex=1}}})]),e._v(" "),a("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),a("van-cell",{attrs:{title:"预约时间",value:""},on:{click:function(t){e.show=!0}},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate},on:{confirm:function(t){e.sureTime()},cancel:function(t){e.show=!1}},model:{value:e.datePicker,callback:function(t){e.datePicker=t},expression:"datePicker"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.setmealId,expression:"!$route.query.setmealId"}],staticClass:"form_wrap"},[a("van-cell",{attrs:{title:"我的优惠券",icon:"coupon","is-link":"",value:this.couponMoney+"元",to:{name:"可用优惠券列表",params:{couponId:e.couponId,couponType:e.couponType}}}})],1)]),e._v(" "),a("div",{staticClass:"page-bottom"},[a("div",{staticClass:"xi-pay"},[e._v("\n        ￥\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.itemCode,expression:"$route.query.itemCode"}],staticClass:"xi-pay-money"},[e._v(e._s(e.itemDetail.itemPrice))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.setmealId,expression:"$route.query.setmealId"}],staticClass:"xi-pay-money"},[e._v(e._s(e.mealDetail.price))])]),e._v(" "),a("button",{staticClass:"xi-button",on:{click:function(t){e.goPay()}}},[e._v("去买单")])])],1)},staticRenderFns:[]};var I=a("VU/8")(b,D,!1,function(e){a("k1Nd")},"data-v-f06440fa",null);t.default=I.exports},k1Nd:function(e,t){}});
//# sourceMappingURL=11.35984d772e9bbe9c4072.js.map